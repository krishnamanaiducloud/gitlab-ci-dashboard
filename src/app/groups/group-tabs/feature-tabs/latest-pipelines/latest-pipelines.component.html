<div class="flex flex-col gap-1 w-full">

  <!-- TOP FILTER ROW (LEFT FILTERS + RIGHT CSV BUTTON) -->
  <div class="flex justify-between items-center w-full">

    <!-- LEFT SIDE FILTERS (NO WRAP, SCROLL HORIZONTALLY IF NEEDED) -->
    <div class="flex flex-nowrap gap-3 items-center overflow-x-auto">

      <!-- PROJECT FILTER -->
      <gcd-project-filter
        [projects]="projects()"
        [filterText]="filterProject()"
        (filterTextChange)="onFilterProjectChanged($event)"
      ></gcd-project-filter>

      <!-- GROUP FILTER -->
      <gcd-text-filter
        [filterText]="filterGroup()"
        placeholder="Search groups..."
        (filterTextChange)="onFilterGroupChanged($event)"
      ></gcd-text-filter>

      <!-- BRANCH FILTER -->
      <gcd-text-filter
        [filterText]="filterBranch()"
        placeholder="Search branches..."
        (filterTextChange)="onFilterBranchChanged($event)"
      ></gcd-text-filter>

      <!-- TRIGGER FILTER -->
      <gcd-text-filter
        [filterText]="filterTrigger()"
        placeholder="Search triggers..."
        (filterTextChange)="onFilterTriggerChanged($event)"
      ></gcd-text-filter>

      <!-- TOPIC FILTER -->
      <gcd-topic-filter
        [loading]="loading()"
        [projects]="projects()"
        [filterTopics]="filterTopics()"
        (filterTopicsChange)="onFilterTopicsChanged($event)"
      ></gcd-topic-filter>

      <!-- JOB FILTER -->
      <gcd-job-filter
        [loading]="loading()"
        [jobs]="jobs()"
        [filterJobs]="filterJobs()"
        (filterJobsChange)="onFilterJobsChanged($event)"
      ></gcd-job-filter>

    </div>

    <!-- RIGHT SIDE CSV BUTTON -->
    <button nz-button nzType="default" (click)="exportCsv()">
      Export CSV
    </button>

  </div>


  <!-- TABLE SECTION -->
  @if (loading()) {
    <nz-spin />
  } @else {

    <gcd-pipeline-status-tabs
      [projectPipelines]="projectPipelines()"
      [filterProject]="filterProject()"
      [filterGroup]="filterGroup()"
      [filterBranch]="filterBranch()"
      [filterTrigger]="filterTrigger()"
      [filterTopics]="filterTopics()"
      [filterJobs]="filterJobs()"
      [filterText]="filterProject()"
    >
    </gcd-pipeline-status-tabs>

  }

</div>

